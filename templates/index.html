<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Song of the Day</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!--
      COLORS:
      red: #E63946 rgb(230, 57, 70)
      cream: #F1FAEE rgb(105, 5, 98)
      light blue: #A8DADC rgb(168, 218, 220)
      blue: #457B9D rgb(69, 123, 157)
      dark blue: #1D3557 rgb(29, 53, 87)
    -->
    <!-- Add your CSS link here for styling -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/test.css') }}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Symbols+Outlined">
    <link href="https://fonts.googleapis.com/css2?family=Poppins" rel="stylesheet">
    <style>
      /* Your CSS styles go here */
    </style>
</head>
<body>
    <!-- Header section -->
    <ul>
        <li><img src="{{ url_for('static', filename='images/logo.png')}}" height="25" width="25" style="padding-right: 10px; padding-left: 10px; padding-top: 10px; padding-bottom: 10px;"></li>
        <li><a class="active" href="#home">Home</a></li>
        <li><a href="#archive">Archive</a></li>

    </ul>
    <h1 style="text-align: center;">Song of the Day</h1>

    <!-- Main content -->
    <!-- Search bar for songs -->
    <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Search for songs...">
        <button onclick="searchSongs()">
            <span class="material-symbols-outlined" style="color: #F1FAEE;">
                search
            </span>
        </button>
    </div>

    <!-- Testing area -->
    <div class='parent flex-parent'>
        <div class='child flex-child' id="searchResults">
          <div class="item">
            <div class="image">
                <img src="https://i.scdn.co/image/ab67616d0000b27395ca6a9b4083a86c149934ae" width="75" height="75">
            </div>
            <div class="data">
                <h3 style="font-size: 20px; margin: 0px; height: 25px">Daylight</h3>
                <p style="margin: 0px; font-size: 10px;">By: David Kushner</p>
                <div class="button-group">
                    <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19" fill="none">
                        <path d="M9.49999 0C4.25627 0 0 4.25627 0 9.5C0 14.7551 4.25627 19 9.49999 19C14.7551 19 19 14.7437 19 9.5C19.0113 4.25627 14.7551 0 9.49999 0ZM13.8584 13.7109C13.6882 13.9946 13.325 14.0741 13.0412 13.9038C10.8052 12.5418 8.00178 12.2354 4.68757 12.9845C4.36977 13.0526 4.05197 12.8596 3.98387 12.5418C3.91577 12.224 4.10872 11.9062 4.42652 11.8381C8.04718 11.0096 11.1571 11.3614 13.6541 12.8937C13.9492 13.0639 14.04 13.4271 13.8584 13.7109ZM15.0275 11.1231C14.8118 11.4749 14.3578 11.5771 14.006 11.3728C11.4522 9.7951 7.55913 9.3411 4.54002 10.2605C4.14277 10.374 3.73417 10.1583 3.62066 9.7724C3.50716 9.37515 3.72281 8.96655 4.12007 8.85305C7.57048 7.80884 11.8608 8.30824 14.8005 10.1129C15.1296 10.3172 15.2431 10.7712 15.0275 11.1231ZM15.1296 8.42174C12.0651 6.60574 7.01433 6.43548 4.08602 7.32079C3.62066 7.46834 3.12126 7.19594 2.97371 6.73059C2.82616 6.26523 3.09856 5.76583 3.56391 5.61828C6.92353 4.59677 12.5077 4.80108 16.0263 6.88949C16.4462 7.13919 16.5824 7.68399 16.3327 8.10394C16.0944 8.53525 15.5496 8.67145 15.1296 8.42174Z" fill="#E63946"/>
                    </svg>
                    <button onclick="openData()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="19" viewBox="0 0 20 19" fill="none">
                            <mask id="mask0_20_7" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="19">
                                <rect x="0.5" width="19" height="19" fill="#D9D9D9"/>
                            </mask>
                            <g mask="url(#mask0_20_7)">
                                <path d="M4.70195 16.2291C4.30205 16.2291 3.96356 16.0906 3.68648 15.8135C3.40939 15.5364 3.27085 15.1979 3.27085 14.7981V4.20195C3.27085 3.80205 3.40939 3.46356 3.68648 3.18648C3.96356 2.90939 4.30205 2.77085 4.70195 2.77085H9.69549V3.95833H4.70195C4.64104 3.95833 4.58521 3.98371 4.53445 4.03445C4.48371 4.08521 4.45833 4.14104 4.45833 4.20195V14.7981C4.45833 14.859 4.48371 14.9148 4.53445 14.9655C4.58521 15.0163 4.64104 15.0417 4.70195 15.0417H15.2981C15.359 15.0417 15.4148 15.0163 15.4655 14.9655C15.5163 14.9148 15.5417 14.859 15.5417 14.7981V9.80452H16.7291V14.7981C16.7291 15.1979 16.5906 15.5364 16.3135 15.8135C16.0364 16.0906 15.6979 16.2291 15.2981 16.2291H4.70195ZM8.19439 12.1399L7.36011 11.3056L14.7074 3.95833H11.5833V2.77085H16.7291V7.91667H15.5417V4.79261L8.19439 12.1399Z" fill="#F1FAEE"/>
                            </g>
                        </svg>
                    </button>
                </div>
            </div>
          </div>
        </div>
        <div class='child flex-child'>B</div>
    </div>
      <span class="material-symbols-outlined">
        arrow_forward
        </span>
    <br>
    <!-- Song of the Day section -->
    <div class="song-of-the-day">
      <h2>Song of the Day</h2>
      <!-- Display song details here -->
      <p>Title: Song Title</p>
      <p>Artist: Artist Name</p>
      <img src="album_cover.jpg" alt="Album Cover">
      <button onclick="addSong()">Add Song</button>
    </div>
</body>
<script>
    // JavaScript functions for search and adding songs

    function searchSongs() {
        let x = document.getElementById("searchInput").value;
        fetch('http://192.168.4.44:5000/search/' + x) .then(response => response.json()) .then(data => {
            document.getElementById("searchResults").textContent = "";
            console.log(data)
            i = 1

            songData = []

            for (let i = 0; i < data["tracks"]["items"].length; i ++) {
                name = data["tracks"]["items"][i]["name"];
                artist = data["tracks"]["items"][i]["artists"][0]["name"];
                image_pic = data["tracks"]["items"][i]["album"]["images"][0]["url"];
                track_id = data["tracks"]["items"][i]["id"];

                console.log(track_id)

                x = {"name": name,
                    "artist": artist,
                    "art": image_pic,
                    "id": track_id}

                songData[i] = x
            }
        
            for (let i = 0; i < 6; i ++) {
                name = songData[i]["name"]
                artist= songData[i]["artist"]
                image_pic = songData[i]["art"]
                track_id = songData[i]["id"]

                item = document.createElement("div");
                item.id = "item" + i;
                item.classList.add("item")

                image = document.createElement("div");
                image.id = "image" + i;

                data = document.createElement("div");
                data.id = "data" + i;
                data.classList.add("data")

                img = document.createElement('img');
                img.src = image_pic; img.height = "75"; img.width = "75";

                songName = document.createElement("h3");
                songName.textContent = name; songName.style = "font-size: 20px; margin: 0px; height: 25px";
                console.log(name.length)

                if (name.length > 25) {
                    name = name.slice(0, 25)
                    name += "..."
                    songName.textContent = name
                }

                songBy = document.createElement("p");
                songBy.textContent = "By: " + artist; songBy.style = "margin: 0px; font-size: 10px;"

                button_group = document.createElement("div")
                button_group.classList.add("button-group"); button_group.id = "button-group" + i;

                detail = document.createElement("button")
                detail.id = "detail" + i;

                //icon link click
                icon_link = document.createElement("a")
                icon_link.href = `https://open.spotify.com/track/${track_id}`;
                icon_link.id = "iconlink" + i; icon_link.target = "_blank";

                icon = document.createElement("img")
                icon.src = "{{ url_for('static', filename='images/spotify_logo.png') }}"; icon.width = "19"; icon.height = "19";

                button_art = document.createElement("img")
                button_art.src = "{{ url_for('static', filename='/images/open_in_window.png') }}"; button_art.width = "19"; button_art.height = "19";

                document.getElementById("searchResults").appendChild(item)
                document.getElementById("item" + i).appendChild(image)
                document.getElementById("item" + i).appendChild(data)

                document.getElementById('image' + i).appendChild(img);

                document.getElementById("data" + i).appendChild(songName);
                document.getElementById("data" + i).appendChild(songBy);
                
                document.getElementById("data" + i).appendChild(button_group);
                
                document.getElementById("button-group" + i).appendChild(icon_link);
                document.getElementById("iconlink" + i).appendChild(icon);

                document.getElementById("button-group" + i).appendChild(detail);
                document.getElementById("detail" + i).appendChild(button_art);
            }
        }) .catch(error => console.error(error)); 
    }

    function openData() {

    }

    function addSong() {
        // Implement functionality to add a song
        // This might open a form for user input or trigger an action to add the song
    }
</script>
</html>
